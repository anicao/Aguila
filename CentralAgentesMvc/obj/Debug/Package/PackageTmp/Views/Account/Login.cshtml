@model CentralAgentesMvc.Models.LoginViewModel

@{
    
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
    ViewBag.Title = "Log in";
}

<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nvLogin">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div id="logo">
                <a href='@Url.Action("Index", "Home")'>
                    <img class="img-logo" alt="" src="" />
                </a>
                <h1>Agentes</h1>
            </div>
        </div>        
        <div class="collapse navbar-collapse" id="nvLogin">
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <button type="button" class="btn btn-primary navbar-btn dropdown-toggle" data-toggle="dropdown" style="margin-right: 5px;">
                        <span class="fa fa-user fa-lg"></span>&nbsp;
                        Iniciar Sesión
                    </button>
                    <ul class="dropdown-menu" role="menu" style="margin-right: 3px;">
                        @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true)
                            
                            <div class="panel-body" style="margin-bottom: 1px;">
                                <div style="text-align: center; margin-bottom: 10px;">
                                    <i class="faLogged fa fa-user fa-4x"></i>
                                </div>
                                <div class="form-group" style="margin-bottom: 1px;">
                                    <div class="col-md-12" style="padding: 2px 10px 1px 10px;">
                                        @Html.TextBoxFor(m => m.UserName, new { @class = "form-control input-md", @placeholder = "Usuario", })
                                        @Html.ValidationMessageFor(m => m.UserName)
                                    </div>
                                </div>
                                <div class="form-group" style="margin-bottom: 1px;">
                                    <div class="col-md-12" style="padding: 2px 10px 0px 10px;">
                                        @Html.PasswordFor(m => m.Password, new { @class = "form-control input-md", @placeholder = "Contraseña" })
                                        @Html.ValidationMessageFor(m => m.Password)
                                    </div>
                                </div>
                            </div>
                            <div class="panel-footer" style="padding: 2px;">
                                <button type="submit" class="btn btn-sm btn-primary btn-block">Entrar</button>
                                <button type="button" class="btn btn-sm btn-success btn-block" id="resetPassButton">Olvidó su contraseña</button>
                            </div>
                        }
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>


<div class="container-fluid" style="margin-top: 5%;">
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            @*<li data-target="#myCarousel" data-slide-to="1"></li>*@
            <li data-target="#myCarousel" data-slide-to="2"></li>
            @*<li data-target="#myCarousel" data-slide-to="3"></li>*@
            @*<li data-target="#myCarousel" data-slide-to="4"></li>*@
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <img src="~/Content/images/img1.jpg" alt="Welcome" />
            </div>

           @* <div class="item">
                <img src="~/Content/images/img2.jpg" alt="Fiscal" />
            </div>*@

            <div class="item">
                <img src="~/Content/images/img3.jpg" alt="Informativo" />
            </div>

            @*<div class="item">
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">Estimados Agentes:</span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        <strong>El Águila Compañía de Seguros</strong> quiere informarles que derivado de las modificaciones
                        a la legislación fiscal mexicana (Artículo 29 del Código Fiscal de la Federación), es obligatorio para
                        los contribuyentes expedir comprobantes fiscales digitales por Internet (Factura Electrónica).
                    </span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        Por tal obligación, a partir del <strong>1ro. de Diciembre de 2010</strong> El Aguila solo realizará la
                        expedición de Facturas Electrónicas, por lo que se les solicita de la manera más atenta ponerse en contacto
                        con su Ejecutiva , con el fin de proporcionarles mayores informes sobre este cambio.
                    </span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        Así mismo es importante destacar que a partir de esta misma fecha, todas las pólizas deberán
                        contar con una dirección de correo electrónico.
                    </span>
                </p>            
            </div>*@

           @* <div class="item">
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx"><strong style="text-align: center">Recordatorio</strong></span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        El deducible mínimo de Robo Total aplicable a la 
                            <strong>Journey</strong>,
                            <strong> Acadia</strong>,
                            <strong> Bora</strong> y 
                            <strong> Tsuru</strong> 
                        será del 15%.
                    </span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        Para los vehículos
                            <strong>Journey</strong>,
                            <strong> Acadia</strong>,
                            <strong> Bora</strong> y 
                            <strong> Tsuru</strong>
                        no aplica ningún <strong>Procar</strong>.
                    </span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        En el caso de Daños Materiales podemos otorgar un deducible mínimo de 3% pero no aplica la
                        Cobertura 100
                    </span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        Para las renovaciones mantendremos los deducibles de Robo Total contratados en la póliza
                        anterior, sin embargo no los bajaremos si actualmente tienen contratado el 10%.
                    </span>
                </p>
                <br />
                <p class="textMessage">
                    <span class="textMessage" lang="es-mx">
                        Para Pólizas nuevas con forma de pago mensual o trimestral el <strong>Procar</strong>
                        máximo será del 10%.
                    </span>
                </p>
            </div>*@
        </div>

 @*       <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>*@
    </div>
</div>

<div class="footer" id="footer">
    @Html.Partial("_Footer")
</div>

<script type="text/javascript">
    $("#UserName").keydown(function (event) {
        if (event.shiftKey) { event.preventDefault(); }
        if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9) { }
        else {
            if (event.keyCode < 95) {
                if (event.keyCode < 48 || event.keyCode > 57) {
                    event.preventDefault();
                }
            }
            else {
                if (event.keyCode < 96 || event.keyCode > 105) {
                    event.preventDefault();
                }
            }
        }
    });


    $("#myCarousel").carousel({ interval: 3000 });

    $('#resetPassButton').click(function (ev) {
        if ($("#UserName").val().length > 0) {
            var userName = $("#UserName").val();
            
            // Llamo al accion para enviar el mail
            $.ajax({
                type: "POST",
                url: '@Url.Action("ResetPassword", "Account")',
                data: { userID: userName },
                success: function (msg) {
                    if (msg == "OK")
                        ShowAlertWindow("Se restablecio su contraseña correctamente ", "Reset", "img-sucess");
                    else
                        ShowAlertWindow(msg, "Reset", "img-error");
                },
                error: function (e) { ShowAlertWindow(e.responseText, 'Error...', 'img-error'); }
            });
        }
        else {
            ShowAlertWindow("Debe indicar el usuario", "Reset", "img-error");
        }
    });

    var uAg = navigator.userAgent.toLowerCase();
    var isMobile = !!uAg.match(/android|iphone|ipad|ipod|blackberry|symbianos/i);

    if (isMobile)
        $('#footer').hide();

</script>
